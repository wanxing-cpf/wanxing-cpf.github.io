<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>用户管理 - 管理员</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div class="container my-5">
    <h2 class="mb-4">用户管理</h2>
    <table class="table table-striped">
      <thead>
        <tr>
          <th>用户名</th>
          <th>创建时间</th>
          <th>类型</th>
          <th>操作</th>
        </tr>
      </thead>
      <tbody>
        <% users.forEach(u => { %>
          <tr>
            <td><%= u.username %></td>
            <td><%= new Date(u.created_at).toLocaleString() %></td>
            <td><%= u.is_admin ? '管理员' : '普通用户' %></td>
            <td>
              <% if (!u.is_admin) { %>
                <form action="/admin/users/delete/<%= u.id %>" method="POST" onsubmit="return confirm('确认删除此用户？');">
                  <button class="btn btn-sm btn-danger">删除</button>
                </form>
              <% } else { %>
                <span class="text-muted">不可删除</span>
              <% } %>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
    <a class="btn btn-secondary mt-3" href="/admin/files">返回文件管理</a>
  </div>
</body>
</html>
